(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{55:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(2),n=a.n(r),s=a(29),i=a.n(s),o=(a(55),a(6)),u=a.n(o),l=a(13),d=a(4),j=a(10),b=a.n(j),m="https://api.bigdatacloud.net/data/reverse-geocode?",h="b6b6e1d9f9a14cfb95889b6900b0b8ff",p="https://api.openweathermap.org/data/2.5/weather?",f=b.a.create(),O=function(){var e=Object(l.a)(u.a.mark((function e(t,a,c){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(m,"latitude=").concat(t,"&longitude=").concat(a,"&localityLanguage=en&key=").concat(h),{cancelToken:c});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,c){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(p,"id=").concat(t,"&units=metric&APPID=").concat("5f173b1653a520b1204c3d8cc7202fb6"),{cancelToken:a});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"GET",url:"https://wft-geo-db.p.rapidapi.com/v1/geo/cities",params:{limit:"5",minPopulation:"30000",namePrefix:t},headers:{"x-rapidapi-key":"73684db7a1msh8b685a8e80dea2ap10cbdejsn3b4ff31b5e1c","x-rapidapi-host":"wft-geo-db.p.rapidapi.com"},cancelToken:a},e.prev=1,e.next=4,f.request(c);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(e){return e.suggestions?0===e.suggestions.length?Object(c.jsx)("div",{style:{visibility:e.areSuggestionsVisible?"visible":"hidden"},className:"suggestions",children:Object(c.jsx)("p",{className:"suggestion_no_results",children:"No results"})}):Object(c.jsx)("div",{className:"suggestions",style:{visibility:e.areSuggestionsVisible?"visible":"hidden"},children:e.suggestions.map((function(t,a){return Object(c.jsx)("p",{className:"suggestion",onMouseDown:function(){return e.handleSelect(t.city,t.country)},children:"".concat(t.city,", ").concat(t.country)},a)}))}):Object(c.jsx)("div",{})},_=a(5),w=a(7),y=function(e){return Object(c.jsx)("div",{style:{display:e.isLoading?"block":"none"},className:"small_loader_wrapper",children:Object(c.jsxs)("div",{className:"small_loader",children:[Object(c.jsx)(w.d,{className:"loader_icon_dark"}),Object(c.jsx)(w.d,{className:"loader_icon_dark"}),Object(c.jsx)(w.d,{className:"loader_icon_light"})]})})},N=function(e){var t=Object(_.g)(),a=new URLSearchParams(t.search);return a.get(e)?a.get(e):null},k=function(e){var t=Object(r.useState)(null),a=Object(d.a)(t,2),n=a[0],s=a[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],m=o[1],h=Object(r.useState)(!1),p=Object(d.a)(h,2),f=p[0],O=p[1],x=Object(r.useState)(!1),w=Object(d.a)(x,2),N=w[0],k=w[1],L=Object(_.f)(),C=Object(r.useRef)(),S=Object(r.useRef)(!1),D=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(t.target.value),!S.current){e.next=3;break}return e.abrupt("return");case 3:(function(){t.target.value.length>=4&&(k(!0),S.current=!0,"undefined"!==typeof C.current&&C.current.cancel(),C.current=b.a.CancelToken.source(),setTimeout(Object(l.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.current=!1,e.next=3,g(t.target.value,C.current.token);case 3:(a=e.sent)&&(O(!0),s(a.data),k(!1));case 5:case"end":return e.stop()}}),e)}))),800)),3===t.target.value.length&&("undefined"!==typeof C.current&&C.current.cancel(),k(!1),O(!1))})();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault()}(e)},className:"form "+e.locationClass,children:Object(c.jsxs)("div",{className:"text_input_block",children:[Object(c.jsx)(y,{isLoading:N}),Object(c.jsx)("input",{type:"text",placeholder:"Type and select city from list",onFocus:function(){O(!0)},onBlur:function(){O(!1)},onChange:D,value:j}),Object(c.jsx)(v,{areSuggestionsVisible:f,handleSelect:function(e,t){L.push("/Weather/city?q=".concat(e,"&country=").concat(t))},suggestions:n})]})})},L=Object(r.createContext)(),C=function(e){var t=Object(r.useRef)(),a=Object(r.useRef)(),n=Object(r.useRef)(!1);return Object(c.jsx)(L.Provider,{value:{aboutRef:t,burgerRef:a,isBurgerClicked:n,toogleBurger:function(){n.current=!n.current,n.current?a.current.classList.add("burger_clicked"):a.current.classList.remove("burger_clicked"),t.current.style.clipPath=n.current?"inset(0 0 0 0)":"inset(0 0 100% 0)"}},children:e.children})},S=function(e){var t=Object(r.useContext)(L);return Object(r.useEffect)((function(){var e=function(){t.toogleBurger()};return t.burgerRef.current.addEventListener("click",e),function(){t.burgerRef.current.removeEventListener("click",e)}})),Object(c.jsxs)("div",{ref:t.burgerRef,className:"burger "+e.locationClass,children:[Object(c.jsx)("div",{className:"burger_line"}),Object(c.jsx)("div",{className:"burger_line"}),Object(c.jsx)("div",{className:"burger_line"})]})},D=a(46),T=a(25),R=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),c=a[0],n=a[1];return Object(r.useEffect)((function(){switch(e.weather){case"Clouds":case"Mist":"few clouds"===e.weatherDescription?n(w.c):n(w.a),n(w.a);break;case"Clear":n(w.e);break;case"Snow":n(D.a);break;case"Rain":"light rain"===e.weatherDescription?n(w.d):n(w.b);break;case"Drizzle":n(w.b);break;case"Thunderstorm":n(T.b);break;default:n(T.a)}}),[e.weather,e.weatherDescription]),c},I=function(e){return Object(c.jsxs)("div",{className:"home_weather",children:[Object(c.jsxs)("p",{className:"home_temperature",children:[e.weatherData.temperature,"\xb0C"]}),Object(c.jsxs)("p",{className:"home_city",children:[e.currentPlace,", ",e.county,Object(c.jsx)("span",{className:"home_weather_icon",children:Object(c.jsx)(R,{weather:e.weatherData.weather,weatherDescription:e.weatherData.description})})]})]})},P=a.p+"static/media/clear.eb1cff6f.jpg",V=a.p+"static/media/cloudy.3a9a56da.jpg",E=a.p+"static/media/rain.d669916a.jpg",F=a.p+"static/media/drizzle.4be2f625.jpg",z=a.p+"static/media/storm.230974b5.png",B=a.p+"static/media/clearAndCloudy.3ad6f20e.png",M=a.p+"static/media/snow.ee6f6c52.jpg",W=a.p+"static/media/mist.bb0b398b.jpg",q=function(e){var t=Object(r.useState)(!0),a=Object(d.a)(t,2),c=a[0],s=a[1],i=Object(r.useRef)({current:{src:""}});Object(r.useEffect)((function(){if(c&&e.weather){switch(i.current=new Image,e.weather){case"Clouds":i.current.src=V;break;case"Mist":"few clouds"===e.weatherDescription?i.current.src=B:i.current.src=V;break;case"Clear":i.current.src=P;break;case"Snow":i.current.src=M;break;case"Rain":"light rain"===e.weatherDescription?i.current.src=F:i.current.src=E;break;case"Drizzle":break;case"Thunderstorm":i.current.src=z;break;default:i.current.src=W}i.current.onload=function(){s(!1),e.setIsLoaderVisible(!1)}}}),[e.weather]);var o={backgroundImage:"linear-gradient(rgba(1, 2, 11, 0.4), rgba(1, 2, 11, 0.4)), url(".concat(i.current.src,")"),backgroundPosition:"center",backgroundSize:"cover"};return n.a.cloneElement(e.children,{props:e,backgroundImageStyles:o,src:i.current.src})},A=a(21),J=a(19),G=a(20),H=function(e){var t=Object(r.useState)(!1),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(r.useEffect)((function(){e.isLoaderVisible||""===e.temperature||s(!0)}),[e.isLoaderVisible,e.temperature]),Object(c.jsx)(J.Transition,{items:n,config:G.a.slow,from:{transform:"scale(1)"},enter:{transform:"scale(1.2)"},leave:{transform:"scale(1.2)"},children:function(t){return t&&function(t){return Object(c.jsx)("div",{style:Object(A.a)(Object(A.a)({},t),e.backgroundImageStyles),className:"home_image"})}}})},U=function(e){var t=Object(r.useState)(!0),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(r.useEffect)((function(){e.isLoaderVisible||""===e.temperature||s(!1)}),[e.isLoaderVisible,e.temperature]),Object(c.jsx)(J.Transition,{items:n,config:G.a.gentle,from:{opacity:1},enter:{opacity:1},leave:{opacity:0},children:function(e){return e&&function(e){return Object(c.jsx)("div",{style:e,className:"home_loader_block",children:Object(c.jsxs)("div",{className:"animated_loader",children:[Object(c.jsx)(w.a,{}),Object(c.jsx)(w.a,{}),Object(c.jsxs)("div",{className:"loading_block",children:[Object(c.jsx)("div",{className:"loading_line"}),Object(c.jsx)("div",{className:"loading_line"}),Object(c.jsx)("div",{className:"loading_line"}),Object(c.jsx)("div",{className:"loading_line"})]})]})})}}})},K=function(){var e=Object(r.useState)(!0),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],j=i[1],m=Object(r.useState)(""),h=Object(d.a)(m,2),p=h[0],f=h[1],g=Object(r.useState)({temperature:"",weather:"",description:""}),v=Object(d.a)(g,2),_=v[0],w=v[1];return Object(r.useEffect)((function(){var e=b.a.CancelToken.source(),t=b.a.CancelToken.source();return navigator.geolocation.getCurrentPosition(function(){var a=Object(l.a)(u.a.mark((function a(c){var r,n,s,i,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=c.coords.latitude,n=c.coords.longitude,a.next=4,O(r,n,e.token);case 4:return""!==(s=a.sent).city?j(s.city):j(s.locality),f(s.countryName),s.localityInfo.administrative.map((function(e){e.name!==s.city&&e.name!==s.locality||!e.hasOwnProperty("geonameId")||(i=e.geonameId)})),a.next=10,x(i,t.token);case 10:(o=a.sent)&&w({temperature:Math.round(o.main.temp),weather:o.weather[0].main,description:o.weather[0].description});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),function(){e.cancel(),t.cancel()}}),[]),Object(c.jsxs)("div",{className:"home_wrapper",children:[Object(c.jsx)(U,{isLoaderVisible:a,temperature:_.temperature}),Object(c.jsx)(q,{setIsLoaderVisible:n,weather:_.weather,weatherDescription:_.description,children:Object(c.jsx)(H,{isLoaderVisible:a,temperature:_.temperature})}),Object(c.jsx)("div",{className:"burger_block",children:Object(c.jsx)(S,{locationClass:"home"})}),Object(c.jsxs)("div",{className:"side_offset home",children:[Object(c.jsx)("p",{className:"home_logo",children:"Weather logo."}),Object(c.jsx)(I,{currentPlace:o,county:p,weatherData:_}),Object(c.jsx)(k,{locationClass:"home"})]})]})},Q=function(e){return Object(c.jsxs)("div",{className:"navbar_background",children:[Object(c.jsx)("div",{className:"side_offset navbar",children:Object(c.jsx)("div",{className:"search_block",children:Object(c.jsx)(k,{locationClass:"navbar"})})}),Object(c.jsx)("div",{className:"burger_block navbar_burger",children:Object(c.jsx)(S,{locationClass:"navbar"})})]})},X=function(){return Object(c.jsx)(r.Fragment,{children:Object(c.jsx)("div",{className:"city_photo loader"})})},Y=function(e){var t=Object(r.useState)(!1),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(r.useEffect)((function(){e.isLoaderVisible||""===e.temperature||s(!0)}),[e.isLoaderVisible,e.temperature]),e.isLoaderVisible?Object(c.jsx)(X,{}):Object(c.jsx)(J.Transition,{items:n,config:G.a.slow,from:{transform:"scale(1)"},enter:{transform:"scale(1.2)"},leave:{transform:"scale(1.2)"},children:function(t){return t&&function(t){return Object(c.jsx)("div",{style:Object(A.a)(Object(A.a)({},t),e.backgroundImageStyles),className:"city_photo"})}}})},Z=a(47),$=a(48),ee=a(26),te=function(){return Object(c.jsx)("div",{className:"no_results_block",children:Object(c.jsxs)("div",{className:"no_results_content",children:[Object(c.jsxs)("div",{className:"no_results_title",children:[Object(c.jsx)(ee.b,{}),Object(c.jsx)("p",{children:"No results"})]}),Object(c.jsx)("p",{className:"no_results_text",children:"No results for 'Luudown'"})]})})},ae=function(){return Object(c.jsx)(r.Fragment,{children:Object(c.jsxs)("div",{className:"city_text",children:[Object(c.jsx)("div",{className:"city_main_info loader"}),Object(c.jsxs)("div",{className:"city_additional_info",children:[Object(c.jsx)("div",{className:"city_additional_info_item loader"}),Object(c.jsx)("div",{className:"city_additional_info_item loader"}),Object(c.jsx)("div",{className:"city_additional_info_item loader"})]})]})})},ce=function(e){return!0===e.noResults?Object(c.jsx)(te,{}):Object(c.jsxs)("div",{className:"city_text",children:[Object(c.jsxs)("div",{className:"city_main_info",children:[Object(c.jsxs)("h1",{children:[e.placeName.city,", ",e.placeName.country]}),Object(c.jsxs)("div",{className:"weather_mini_card",children:[Object(c.jsxs)("p",{className:"city_temperature",children:[Math.round(e.temperature),"\xb0C"]}),Object(c.jsx)("div",{className:"mini_card_line"}),Object(c.jsx)("div",{className:"city_weather_icon",children:Object(c.jsx)(R,{weather:e.weather,weatherDescription:e.weatherDescription})})]})]}),Object(c.jsxs)("div",{className:"city_additional_info",children:[Object(c.jsxs)("div",{className:"city_additional_info_item",children:[Object(c.jsxs)("h2",{children:["Wind speed ",Object(c.jsx)(w.f,{})]}),Object(c.jsxs)("p",{children:[e.windSpeed," m/s"]})]}),Object(c.jsxs)("div",{className:"city_additional_info_item",children:[Object(c.jsxs)("h2",{children:["Humidity ",Object(c.jsx)(Z.a,{})]}),Object(c.jsxs)("p",{children:[e.humidity,"%"]})]}),Object(c.jsxs)("div",{className:"city_additional_info_item",children:[Object(c.jsxs)("h2",{children:["Pressure ",Object(c.jsx)($.a,{})]}),Object(c.jsxs)("p",{children:[e.pressure," psf"]})]})]})]})},re=function(){var e=Object(r.useState)(!0),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)({isLoading:!0,data:null}),i=Object(d.a)(s,2),o=i[0],j=i[1],m=N("q").toLowerCase(),h=N("country").toLowerCase(),p=Object(r.useRef)({city:"",country:""});return Object(r.useEffect)((function(){var e=b.a.CancelToken.source(),t=b.a.CancelToken.source(),a=b.a.CancelToken.source();return function(){var c=Object(l.a)(u.a.mark((function c(){var r;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return j({isLoading:!0,data:null}),c.next=3,g(m,e.token);case 3:(r=c.sent)&&0===r.data.map(function(){var e=Object(l.a)(u.a.mark((function e(c){var r,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.name.toLowerCase()!==m||c.country.toLowerCase()!==h){e.next=11;break}return e.next=3,O(c.latitude,c.longitude,t.token);case 3:if(!(r=e.sent)){e.next=11;break}return p.current={city:c.name,country:c.country},r.localityInfo.administrative.map((function(e){e.name.toLowerCase()===h&&e.hasOwnProperty("geonameId")&&(n=e.geonameId)})),e.next=9,x(n,a.token);case 9:s=e.sent,j({isLoading:!1,data:s});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).length&&j({isLoading:!1,data:null});case 5:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}()(),function(){e.cancel(),t.cancel(),a.cancel()}}),[m,h]),o.isLoading||!o?Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)(X,{}),Object(c.jsx)(ae,{})]}):Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)("div",{className:"city_photo_block",children:Object(c.jsx)(q,{setIsLoaderVisible:n,weather:o.data.weather[0].main,weatherDescription:o.data.weather[0].description,children:Object(c.jsx)(Y,{isLoaderVisible:a,temperature:o.data.main.temp})})}),Object(c.jsx)(ce,{isLoading:o.isLoading,noResults:!o.data,temperature:o.data.main.temp,weather:o.data.weather[0].main,weatherDescription:o.data.weather[0].description,windSpeed:o.data.wind.speed,humidity:o.data.main.humidity,pressure:o.data.main.pressure,placeName:p.current})]})},ne=function(){return Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)(Q,{}),Object(c.jsx)(re,{})]})},se=a.p+"static/media/about.29abd825.png",ie=a(49),oe=a(32),ue=function(e){var t=Object(r.useContext)(L);return Object(c.jsxs)("div",{ref:t.aboutRef,className:"about",children:[Object(c.jsx)("img",{src:se,alt:""}),Object(c.jsxs)("div",{className:"about_info_block",children:[Object(c.jsxs)("div",{className:"about_top_part",children:[Object(c.jsx)("h1",{children:"About & Contacts"}),Object(c.jsxs)("div",{className:"about_item",children:[Object(c.jsx)("div",{className:"about_item_icon",children:Object(c.jsx)(ee.a,{})}),Object(c.jsx)("p",{children:"This application represents a weather search system."})]}),Object(c.jsxs)("div",{className:"about_item",children:[Object(c.jsx)("div",{className:"about_item_icon",children:Object(c.jsx)(ie.a,{})}),Object(c.jsx)("p",{children:"Search for weather conditions in different cities."})]})]}),Object(c.jsxs)("div",{className:"about_bottom_part",children:[Object(c.jsxs)("div",{className:"about_email",children:[Object(c.jsx)("div",{}),Object(c.jsx)("p",{children:"nik.yanovskyy@gmail.com"})]}),Object(c.jsx)("a",{href:"https://habr.com/ru/company/ruvds/blog/445276/",rel:"noreferrer",target:"_blank",className:"about_link_btn",children:Object(c.jsx)(oe.a,{})}),Object(c.jsx)("a",{href:"https://habr.com/ru/company/ruvds/blog/445276/",rel:"noreferrer",target:"_blank",className:"about_link_btn",children:Object(c.jsx)(oe.b,{})})]})]})]})},le=a(24),de=function(){return Object(c.jsx)("div",{children:"Not found"})};var je=function(){return Object(c.jsx)(C,{children:Object(c.jsxs)("div",{className:"app_wrapper",children:[Object(c.jsx)(ue,{}),Object(c.jsx)(le.a,{children:Object(c.jsxs)(_.c,{children:[Object(c.jsx)(_.a,{exact:!0,path:"/Weather",component:K}),Object(c.jsx)(_.a,{exact:!0,path:"/Weather/city",component:ne}),Object(c.jsx)(_.a,{component:de})]})})]})})},be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))};i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(je,{})}),document.getElementById("root")),be()}},[[95,1,2]]]);
//# sourceMappingURL=main.eb3a9000.chunk.js.map